<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ADC & DAC — Term Recall Trainer</title>
<style>
:root{
  --bg:#0f1724; --card:#0b1220; --accent:#7dd3fc; --muted:#94a3b8; --radius:14px;
  font-family: Inter, system-ui, sans-serif; color:#e6eef8;
}
body{margin:0;min-height:100vh;background:linear-gradient(180deg,#071126,#071f2b);display:flex;justify-content:center;align-items:flex-start;padding:20px}
.wrap{max-width:900px;width:100%}
h1{color:var(--accent);font-size:22px;margin-bottom:8px}
button{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.1);
  border-radius:10px;padding:8px 14px;color:var(--muted);cursor:pointer;font-weight:600}
button.primary{background:linear-gradient(90deg,var(--accent),#60a5fa);color:#012}
.card{background:rgba(255,255,255,0.04);border-radius:var(--radius);padding:20px;margin-top:16px;box-shadow:0 6px 18px rgba(0,0,0,0.3)}
.flashcard{cursor:pointer;user-select:none;text-align:center;transition:transform 0.3s ease}
.term{font-size:22px;color:var(--accent);font-weight:700;margin-bottom:6px}
.def{font-size:16px;color:var(--muted);line-height:1.45}
.small{font-size:13px;color:var(--muted)}
input[type=text]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);
background:rgba(255,255,255,0.03);color:#e6eef8}
.result{margin-top:10px;font-size:15px}
.correct{color:#34d399}
.wrong{color:#f87171}
.review-item{margin-bottom:10px;border-bottom:1px solid rgba(255,255,255,0.08);padding-bottom:8px}
.review-item strong{color:var(--accent)}
</style>
</head>
<body>
<div class="wrap">
  <h1>ADC & DAC — Term Recall Trainer</h1>
  <div class="small">Practice recalling terms from their definitions. Based on your reviewer.</div>

  <div style="display:flex;gap:8px;margin-top:10px">
    <button id="modeFlash" class="primary">Flashcards</button>
    <button id="modeQuiz">Quiz</button>
    <button id="shuffleBtn">Shuffle</button>
  </div>

  <!-- Flashcards -->
  <div id="flashSection" class="card">
    <div class="small">Click the card or press space to flip (definition → term)</div>
    <div id="flashcard" class="flashcard" tabindex="0" style="margin-top:12px">
      <div id="flashFront" class="def"></div>
      <div id="flashBack" class="term" style="display:none"></div>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <button id="prevCard">Prev</button>
      <div class="small">Card <span id="cardNum">1</span>/<span id="cardTotal">0</span></div>
      <button id="nextCard">Next</button>
    </div>
  </div>

  <!-- Quiz -->
  <div id="quizSection" class="card" style="display:none">
    <div class="question def" id="questionText"></div>
    <input type="text" id="answerInput" placeholder="Type the term here..." autocomplete="off"/>
    <div style="margin-top:8px;display:flex;gap:8px">
      <button id="submitAns" class="primary">Submit</button>
      <button id="skipBtn">Skip</button>
    </div>
    <div class="result" id="resultBox"></div>
    <div style="display:flex;justify-content:space-between;margin-top:10px" class="small">
      <div>Progress: <span id="qCount">0</span>/<span id="qTotal">0</span></div>
      <div>Score: <span id="score">0</span></div>
    </div>
    <div style="margin-top:10px">
      <button id="startQuiz" class="primary">Restart Quiz</button>
    </div>

    <!-- Review Section -->
    <div id="reviewSection" style="display:none;margin-top:16px">
      <h3 style="color:var(--accent);font-size:18px;margin-bottom:8px">Review Wrong Answers</h3>
      <div id="reviewList"></div>
    </div>
  </div>
</div>

<script>
// -------------------- TERMS --------------------
const TERMS=[
  {term:"Analog-to-Digital Conversion",definition:"The process by which analog signals are converted to their digitized (discrete) form."},
  {term:"Sampling",definition:"Taking measurements of the analog signal at regular intervals of time. Sampling rate must satisfy the Nyquist criterion."},
  {term:"Nyquist Criterion",definition:"Sampling rate must be at least twice the highest frequency in the signal to avoid aliasing."},
  {term:"Quantization",definition:"Conversion of continuous sample amplitudes into discrete amplitude levels, introducing quantization error."},
  {term:"Quantization Error",definition:"The difference between the actual analog value and its quantized digital value."},
  {term:"Encoding",definition:"Assigning binary codes (bits) to each quantization level; number of levels L=2ⁿ."},
  {term:"Resolution (ADC)",definition:"The smallest detectable change in input voltage corresponding to one quantization step."},
  {term:"Successive Approximation Register ADC",definition:"ADC using DAC and comparator to perform a binary search for input voltage; common 8–16-bit ADC."},
  {term:"R-2R DAC",definition:"Resistor ladder DAC using only R and 2R values; compact and common in ICs."},
  {term:"Weighted Resistor DAC",definition:"DAC with resistors weighted by binary significance; simple but large for many bits."},
  {term:"DAC0800",definition:"Example of an 8-bit general-purpose DAC with ~100 ns conversion time."},
  {term:"Pulse Width Modulation (PWM)",definition:"Analog-like output by varying duty cycle of digital signal."},
  {term:"Offset Error",definition:"Constant error independent of input."},
  {term:"Gain Error",definition:"Difference between actual and ideal slope (calibration error)."},
  {term:"Nonlinearity Error",definition:"Deviation from ideal linear transfer curve."},
  {term:"Integral Nonlinearity",definition:"Worst-case deviation from ideal transfer curve."},
  {term:"Differential Nonlinearity",definition:"Difference between actual and ideal step size between codes."},
  {term:"Temperature-dependent Error",definition:"Error caused by temperature changes or self-heating."},
  {term:"Hysteresis Error",definition:"Difference between increasing and decreasing input values that produce the same output."},
  {term:"Resolution Error",definition:"Inability to detect change smaller than one quantization step."},
  {term:"Missing Code Error",definition:"Some digital output codes never appear due to converter faults."}
];

// -------------------- HELPERS --------------------
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}

// -------------------- FLASHCARDS --------------------
let deck=[...TERMS];
let index=0;
const flashFront=document.getElementById('flashFront');
const flashBack=document.getElementById('flashBack');
const flashcard=document.getElementById('flashcard');
const cardNum=document.getElementById('cardNum');
const cardTotal=document.getElementById('cardTotal');
cardTotal.textContent=deck.length;

function showCard(i){
  if(deck.length===0)return;
  index=(i%deck.length+deck.length)%deck.length;
  flashFront.textContent=deck[index].definition;
  flashBack.textContent=deck[index].term;
  flashFront.style.display='block';
  flashBack.style.display='none';
  cardNum.textContent=index+1;
}
showCard(0);

flashcard.addEventListener('click',()=>{
  const showingDef=flashFront.style.display==='block';
  flashFront.style.display=showingDef?'none':'block';
  flashBack.style.display=showingDef?'block':'none';
});

document.getElementById('prevCard').onclick=()=>showCard(index-1);
document.getElementById('nextCard').onclick=()=>showCard(index+1);
document.getElementById('shuffleBtn').onclick=()=>{shuffle(deck);showCard(0);};

// ✅ Fixed: allow space typing in inputs
document.addEventListener('keydown', (e)=>{
  if(e.code==='Space' && !['INPUT','TEXTAREA'].includes(e.target.tagName)){
    e.preventDefault();
    flashcard.click();
  }
});

// -------------------- MODE SWITCH --------------------
const flashSec=document.getElementById('flashSection');
const quizSec=document.getElementById('quizSection');
const btnFlash=document.getElementById('modeFlash');
const btnQuiz=document.getElementById('modeQuiz');
btnFlash.onclick=()=>{
  flashSec.style.display='block';quizSec.style.display='none';
  btnFlash.classList.add('primary');btnQuiz.classList.remove('primary');
};
btnQuiz.onclick=()=>{
  flashSec.style.display='none';quizSec.style.display='block';
  btnQuiz.classList.add('primary');btnFlash.classList.remove('primary');
  startQuiz();
};

// -------------------- QUIZ --------------------
let qIndex=0,score=0,questions=[];
let wrongAnswers=[]; // ⛔ store wrong answers

const qText=document.getElementById('questionText');
const ansIn=document.getElementById('answerInput');
const resultBox=document.getElementById('resultBox');
const qCount=document.getElementById('qCount');
const qTotal=document.getElementById('qTotal');
const scoreEl=document.getElementById('score');
const reviewSection=document.getElementById('reviewSection');
const reviewList=document.getElementById('reviewList');

function startQuiz(){
  questions=[...TERMS];
  shuffle(questions);
  qIndex=0;score=0;wrongAnswers=[];
  qTotal.textContent=questions.length;
  scoreEl.textContent=0;
  resultBox.textContent='';
  reviewSection.style.display='none';
  reviewList.innerHTML='';
  showQ();
}

function showQ(){
  if(qIndex>=questions.length){
    qText.textContent=`Quiz finished!`;
    resultBox.innerHTML=`Final Score: <span class='correct'>${score}</span> / ${questions.length}`;
    // show review section if any wrongs
    if(wrongAnswers.length>0){
      reviewSection.style.display='block';
      reviewList.innerHTML=wrongAnswers.map(w=>`
        <div class="review-item">
          <strong>Definition:</strong> ${w.definition}<br/>
          <strong>Your Answer:</strong> <span class="wrong">${w.yourAnswer}</span><br/>
          <strong>Correct Term:</strong> <span class="correct">${w.correct}</span>
        </div>
      `).join('');
    }
    return;
  }
  qText.textContent=questions[qIndex].definition;
  ansIn.value='';
  resultBox.textContent='';
  qCount.textContent=qIndex+1;
}

document.getElementById('submitAns').onclick=()=>{
  const user=ansIn.value.trim().toLowerCase();
  const correct=questions[qIndex].term.trim().toLowerCase();
  if(!user){resultBox.textContent="Please type something.";return;}
  if(user===correct){
    resultBox.innerHTML=`✅ Correct: <span class='correct'>${questions[qIndex].term}</span>`;
    score++;
    scoreEl.textContent=score;
  }else{
    resultBox.innerHTML=`❌ Correct term: <span class='wrong'>${questions[qIndex].term}</span>`;
    wrongAnswers.push({
      definition: questions[qIndex].definition,
      yourAnswer: ansIn.value.trim() || "(blank)",
      correct: questions[qIndex].term
    });
  }
  qIndex++;
  setTimeout(showQ,900);
};

document.getElementById('skipBtn').onclick=()=>{
  resultBox.innerHTML=`⏭️ Skipped. Term: <span class='wrong'>${questions[qIndex].term}</span>`;
  wrongAnswers.push({
    definition: questions[qIndex].definition,
    yourAnswer: "(skipped)",
    correct: questions[qIndex].term
  });
  qIndex++;
  setTimeout(showQ,900);
};
document.getElementById('startQuiz').onclick=startQuiz;
</script>
</body>
</html>

